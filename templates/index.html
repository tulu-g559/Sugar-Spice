<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sugar & Spice 🍭🔥</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="emoji-bg">
    <span>🍭</span>
    <span>🍭</span>
    <span>🍭</span>
    <span>🍭</span>
    <span>🍭</span>
    <span>🔥</span>
    <span>✨</span>
    <span>🎉</span>
    <span>🎉</span>
    <span>🎉</span>
    <span>🎉</span>
    <span>🎉</span>
    <span>💻</span>
    <span>💻</span>
    <span>😎</span>
    <span>😎</span>
    <span>😎</span>
    <span>🚀</span>
    <span>🚀</span>
  </div>
  <div class="container">
    <h1>🍭🔥 Sugar & Spice 🔥🍭</h1>
    <p class="subtitle">Get roasted or complimented with AI magic ✨</p>

    <div class="tabs">
      <button id="roastTab" class="active">🔥 Roast</button>
      <button id="complimentTab">🍭 Compliment</button>
    </div>

    <textarea id="userInput" placeholder="Enter a name or short bio..."></textarea>
    <button id="generateBtn">Generate</button>

    <div id="output" class="card">❤️‍🔥Spice or Sugar🍬??...</div>
  </div>

  <script>
    const roastTab = document.getElementById("roastTab");
    const complimentTab = document.getElementById("complimentTab");
    const generateBtn = document.getElementById("generateBtn");
    const output = document.getElementById("output");
    const userInput = document.getElementById("userInput");

    let mode = "roast"; 

    roastTab.onclick = () => {
      mode = "roast";
      roastTab.classList.add("active");
      complimentTab.classList.remove("active");
    };

    complimentTab.onclick = () => {
      mode = "compliment";
      complimentTab.classList.add("active");
      roastTab.classList.remove("active");
    };

    function markdownToHtml(md) {
    // Bold **text**
    md = md.replace(/\*(.*?)\*/g, '<strong>$1</strong>');
    // Italic *text*
    md = md.replace(/(^|[^*])\*(.*?)\*([^*]|$)/g, '$1<em>$2</em>$3');
    // Unordered lists
    md = md.replace(/(^|\n)[*-]\s+(.*)/g, '$1<li>$2</li>');
    // Wrap <li> in <ul> if any
    if (md.includes('<li>')) {
        md = md.replace(/(<li>.*<\/li>)/gs, '<ul>$1</ul>');
    }
    // Line breaks
    md = md.replace(/\n/g, '<br>');
    return md;
    }

    generateBtn.onclick = async () => {
      output.innerText = "✨ Generating...";
      const response = await fetch("/generate", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({input: userInput.value, mode: mode})
      });
      const data = await response.json();
      output.innerText = data.output;
    };
  </script>
</body>
</html>
